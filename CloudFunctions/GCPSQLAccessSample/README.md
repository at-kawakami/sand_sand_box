# GCP SQLでプライベートIPを使用して、CloudFormation等のサーバレスからDBアクセスを行う方法


- VPC内にプライベート サービス アクセスを作成する
- サーバーレスVPCアクセスコネクタを作成する
- Cloud Function等のサーバレスはPrivate IPでアクセスする
- VM(Cloud SQL Auth Proxy)は、 --private-ip オプションを指定して実行する

## 手順

1. SQL構築時 OR 編集から、IPの割り当て「プライベートIP」を選択
2. 「関連付けられたネットワーキング」から、対象のVPCを選択する
3. 「プライベートサービスアクセスは必須です」が表示出たら、SQL作成画面から、作成する
4. 画面：VPC/サーバレスVPCアクセスから、コネクタを作成する（後ろはVM）
5. Cloud Function作成時に、接続/下り（外向き）設定/ネットワークから、サーバレスVPCアクセスコネクタを作成したネットワークを選択する